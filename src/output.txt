
> api_server@1.0.0 start:dev /mnt/c/users/junsoo/desktop/pikk
> npm run build:dev


> api_server@1.0.0 build:dev /mnt/c/users/junsoo/desktop/pikk
> nodemon 'src/server.ts' --exec 'ts-node' src/server.ts -e ts,graphql

[33m[nodemon] 1.19.1[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching: *.*[39m
[32m[nodemon] starting `ts-node src/server.ts src/server.ts`[39m
enum SortDirection {
  ASC
  DESC
}

enum ItemSortableField {
  id
  name
  brand
  originalPrice
  score
  itemMinorType
  itemMajorType
}

enum PostSortableField {
  title
  time
  viewCount
}

enum BoardType {
  RECOMMEND
  COMMUNITY
}

enum ItemMajorType {
  OUTER
  TOP
  BOTTOM
  SHOES
  BAG
  ACCESSORY
}

enum RecommendPostType {
  RECOMMEND
  LOOK
  SALE
}

enum CommunityPostType {
  QNA
  CHANNEL_POST
}

enum RecommendTitleType {
  YOUTUBE
  IMAGE
}

enum RecommendReason {
  DESIGN
  PRICE
  TEXTURE
  INDIVIDUALITY
}

enum StyleType {
  SIMPLEBASIC
  MODERN
  MINIMAL
  CASUAL
  STREET
  AMEKAJI
  NONE
}

enum QNAType {
  SIZE
  PRODUCT_INFO
  PICK
}

enum PostType {
  RECOMMEND
  COMMUNITY
}

enum FollowType {
  ITEM
  CHANNEL
  RECOMMENDPOST
}

enum ProviderType {
  FACEBOOK
  NAVER
}

enum ItemMinorType {
  COAT
  LEATHER
  TRENCH
  LONGPADDING
  JACKET
  BLAZER
  SHORTPADDING
  MA1
  SHORTT
  LONGT
  HOOD
  KNIT
  CARDIGAN
  SHIRT
  SWEATSHIRT
  DENIMPANTS
  SHORTPANTS
  COTTONPANTS
  SLACKS
  TRAININGPANTS
  CANVAS
  LOAFERS
  BOOTS
  SANDLESLIPPER
  RUNNINGSHOES
  DRESSSHOES
  BACKPACK
  WAISTBAG
  CROSSBAG
  CLUTCH
  ECOBAG
  WATCH
  GLASSES
  SUNGLASS
  WALLET
  BELT
  HAT
  ETC
}

scalar Date

input UserCredentialInput {
  providerType: ProviderType!
  providerId: String!
}

input UserInfoInput {
  id: Int!
  name: String!
  email: String!
  age: Int!
  height: Int!
  weight: Int!
  profileImg: Upload
  phoneNum: String
  address: String
  rank: Int
}

input FollowInfoInput {
  accountId: Int!
  targetType: FollowType!
  targetId: Int!
}

input CommunityPostInfoInput {
  accountId: Int!
  
  # If belongs to a channel, insert UserId
  """
  If belongs to a channel, insert UserId
  """
  channelId: Int!
  title: String!
  content: String!
  postType: CommunityPostType!
  qnaType: QNAType
  img: [Upload]
}

input RecommendPostInfoInput {
  accountId: Int!
  title: String!
  content: String!
  postType: RecommendPostType!
  styleType: StyleType
  saleEndDate: Date
  titleType: RecommendTitleType!
  titleImg: Upload
  titleYoutubeUrl: String
  reviews: [ItemReviewInfoInput!]!
}


# itemId: Int!
input ItemReviewInfoInput {
  itemId: Int
  item: ItemInfoInput!
  recommendReason: RecommendReason!
  shortReview: String!
  imgUrl: Upload
  score: Int!
  cards: [ItemReviewCardInfoInput!]!
}

input ItemReviewCardInfoInput {
  title: String!
  content: String!
  img: Upload
}

input CommentInfoInput {
  accountId: Int!
  targetId: Int!
  targetType: PostType!
  content: String!
}

input ItemInfoInput {
  name: String!
  brand: String!
  originalPrice: Int!
  salePrice: Int
  itemMinorType: ItemMinorType!
  itemMajorType: ItemMajorType!
  purchaseUrl: String
  itemImg: Upload
}

input QueryCommon {
  start: Int = 0
  first: Int = 50
  sort: SortDirection = DESC
}

input ItemQueryFilter {
  itemMajorType: ItemMajorType
  itemMinorType: ItemMinorType
  itemId: Int
}

input ItemQuery {
  filterCommon: QueryCommon!
  itemFilter: ItemQueryFilter
  sortBy: ItemSortableField = score
}

input UserQuery {
  id: Int!
}

input CommentQuery {
  filterCommon: QueryCommon!
  boardType: BoardType!
  postId: Int!
}

input PostQueryFilter {
  accountId: Int
  postId: Int
}

input CommunityPostQueryFilter {
  filterCommon: PostQueryFilter
  postType: CommunityPostType!
  qnaType: QNAType
  channelId: Int
}

input RecommendPostQueryFilter {
  filterCommon: PostQueryFilter
  postType: RecommendPostType!
  styleType: StyleType
  itemId: Int
}

input CommunityPostQuery {
  filterCommon: QueryCommon!
  postFilter: CommunityPostQueryFilter!
  sortBy: PostSortableField = time
}

input RecommendPostQuery {
  filterCommon: QueryCommon!
  postFilter: RecommendPostQueryFilter!
  sortBy: PostSortableField = time
}

input PickkRecommendPostQuery {
  filterCommon: QueryCommon!
  userId: Int!
}

input PickkItemQuery {
  filterCommon: QueryCommon!
  userId: Int!
}

input PickkChannelQuery {
  filterCommon: QueryCommon!
  userId: Int
}

scalar Upload

type Mutation {
  
  # Toggles Account's Follow status on Channel
   # 
   # Return > [-1] : Error [0] : Unfollowed [1] : Followed
  """
  Toggles Account's Follow status on Channel
  
  Return > [-1] : Error [0] : Unfollowed [1] : Followed
  """
  FollowTarget(followInfo: FollowInfoInput!): Int!
  isFollowingTarget(followInfo: FollowInfoInput!): Boolean!
  IncrementViewCount(postType: PostType!, postId: Int!): Boolean!
  
  # Return > [true] : DB save successful  [false] : DB save unsuccessful
  """
  Return > [true] : DB save successful  [false] : DB save unsuccessful
  """
  createComment(commentInfo: CommentInfoInput!): Boolean!
  
  # Return > [true] : DB save successful [false] : DB save unsuccessful
  """
  Return > [true] : DB save successful [false] : DB save unsuccessful
  """
  createCommunityPost(communityPostInfo: CommunityPostInfoInput!): Boolean!
  deleteCommunityPost(postId: Int!): Boolean
  
  # Return >  [true] : DB save successful  [false] : DB save unsuccessful
  """
  Return >  [true] : DB save successful  [false] : DB save unsuccessful
  """
  createItem(itemInfo: ItemInfoInput!): Boolean!
  
  # Return > [true] : DB save successful  [false] : DB save unsuccessful
  """
  Return > [true] : DB save successful  [false] : DB save unsuccessful
  """
  createRecommendPost(recommendPostInfo: RecommendPostInfoInput!): Boolean!
  deleteRecommendPost(postId: Int!): Boolean
  createUser(userAccountInfo: UserCredentialInput!): UserCredentialInfo!
  
  # Return > [true] : DB save successful  [false] : DB save unsuccessful
  """
  Return > [true] : DB save successful  [false] : DB save unsuccessful
  """
  createUserInfo(userInfo: UserInfoInput!): Boolean!
  isDuplicateName(name: String!): Boolean!
}

type Subscription {
  helloWorld: String!
}


# Return
type UserInfo {
  name: String!
  email: String!
  age: Int!
  height: Int!
  weight: Int!
  profileImgUrl: String
  phoneNum: String
  address: String
  rank: Int
}

type UserCredentialInfo {
  isNewUser: Boolean!
  id: Int!
  token: String!
  name: String
  profileImgUrl: String
  rank: Int
}

type ChannelInfo {
  
  # User
  name: String!
  profileImgUrl: String!
  
  # Follow
  pickkCount: Int!
  
  # Channel
  id: Int!
  backgroundImgUrl: String
  description: String
  snsUrl: String
}


# Return
type ItemInfo {
  id: Int!
  name: String!
  brand: String!
  originalPrice: Int!
  salePrice: Int
  itemMinorType: ItemMinorType!
  itemMajorType: ItemMajorType!
  imageUrl: String
  purchaseUrl: String
  pickCount: Int!
}


# Return
type CommunityPostInfo {
  accountId: Int
  name: String!
  profileImgUrl: String
  id: Int
  channelId: Int
  title: String!
  content: String!
  time: String!
  viewCount: Int!
  imageUrl: [String]
  postType: String!
  qnaType: String
  commentCount: Int!
}


# Return
type RecommendPostInfo {
  accountId: Int
  name: String!
  profileImgUrl: String
  pickCount: Int!
  id: Int
  title: String!
  titleType: RecommendTitleType!
  titleImageUrl: String
  titleYoutubeUrl: String
  time: String!
  viewCount: Int!
  content: String!
  reviews: [ItemReviewInfo!]!
  postType: RecommendPostType!
  styleType: StyleType!
  saleEndDate: Date
  commentCount: Int!
}

type ItemReviewInfo {
  id: Int!
  itemId: Int!
  postId: Int!
  recommendReason: RecommendReason!
  shortReview: String!
  score: Int!
  cards: [ItemReviewCardInfo!]!
}

type ItemReviewCardInfo {
  id: Int!
  reviewId: Int!
  title: String!
  content: String!
  imgUrl: String
}

type CommentInfo {
  id: Int!
  postId: Int!
  accountId: Int!
  content: String!
  time: String
}

type Query {
  getComments(commentOption: CommentQuery!): [CommentInfo!]
  allCommunityPosts(communityPostOption: CommunityPostQuery!): [CommunityPostInfo!]
  _allCommunityPostsMetadata: Int!
  allItems(itemOption: ItemQuery!): [ItemInfo!]
  _allItemsMetadata: Int!
  getUserPickkItem(pickkItemOption: PickkItemQuery!): [ItemInfo!]
  allRecommendPosts(recommendPostOption: RecommendPostQuery!): [RecommendPostInfo!]
  _allRecommendPostsMetadata: Int!
  getUserPickkRecommendPost(pickkRecommendPostOption: PickkRecommendPostQuery!): [RecommendPostInfo!]
  getUserPickkChannel(pickkChannelOption: PickkChannelQuery!): [UserInfo!]
  getChannelPickkCount(channelId: Int!): Int!
  getUserInfo(userOption: UserQuery!): [UserInfo!]
}

schema {
  query: Query
  mutation: Mutation
  subscription: Subscription
}

-----

{ getComments: [Function: getComments],
  createComment: [Function: createComment],
  Query: {},
  Mutation:
   { FollowTarget: [Function: FollowTarget],
     isFollowingTarget: [Function: isFollowingTarget],
     IncrementViewCount: [Function: IncrementViewCount] },
  Subscription: { helloWorld: [Function: helloWorld] },
  allCommunityPosts: [Function: allCommunityPosts],
  _allCommunityPostsMetadata: [Function: _allCommunityPostsMetadata],
  createCommunityPost: [Function: createCommunityPost],
  deleteCommunityPost: [Function: deleteCommunityPost],
  allItems: [Function: allItems],
  _allItemsMetadata: [Function: _allItemsMetadata],
  getUserPickkItem: [Function: getUserPickkItem],
  createItem: [Function: createItem],
  allRecommendPosts: [Function: allRecommendPosts],
  _allRecommendPostsMetadata: [Function: _allRecommendPostsMetadata],
  getUserPickkRecommendPost: [Function: getUserPickkRecommendPost],
  createRecommendPost: [Function: createRecommendPost],
  deleteRecommendPost: [Function: deleteRecommendPost],
  createUser: [Function: createUser],
  createUserInfo: [Function: createUserInfo],
  getUserInfo: [Function: getUserInfo],
  getUserPickkChannel: [Function: getUserPickkChannel],
  getChannelPickkCount: [Function: getChannelPickkCount],
  isDuplicateName: [Function: isDuplicateName] }
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
